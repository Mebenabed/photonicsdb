<div ng-init="[getComponents(),getDefinitions(),getBlocks()]">
  <main role="main" class="col-md-12 ml-sm-auto">
  <div class="d-flex justify-content-center border-bottom">
    <h1>
      Insights
    </h1>
  </div>
  <br>
  <div class="btn-group d-flex justify-content-center" role="group" aria-label="view">
    <button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#collapseParameters" aria-expanded="false" aria-controls="collapseParameters" style="background-color:#4B515D;">
      <h6 class="mt-2">
      Parameters look-out
      </h6>
    </button>
    <button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#collapseSpecs" aria-expanded="false" aria-controls="collapseSpecs" style="background-color:#4B515D;">
      <h6 class="mt-2">
      Join comparaison
      </h6>
    </button>
  </div>
  <br>
  <div class="collapse" id="collapseParameters">
  <div class="card">
    <div class="card-header">
      Parameters look-out
    </div>
    <div class="card-body" style="width: 100%; background-color:#2E2E2E; min-width: 18rem;">
      <div class="input-group mb-2 mr-sm-2">
        <div class="input-group-prepend">
          <div class="input-group-text">
            <span data-feather="search" style="width: 15px; height: 15px;">
            </span>
          </div>
        </div>
        <input type="text" class="form-control form-control-sm" id="inlineFormInputGroupAll" ng-model="q" aria-label="filter blocks" placeholder="within the menu below">
        <input type="text" class="form-control form-control-sm" id="inlineFormInputGroupAll" ng-model="q0" aria-label="filter blocks" placeholder="within the menu below">
        <input type="text" class="form-control form-control-sm" id="inlineFormInputGroupAll" ng-model="q1" aria-label="filter blocks" placeholder="within the menu below">
      </div>
        <select class="form-control" size="26" ng-model="c">
          <option ng-repeat="component in components | orderBy : 'name' | filter : {type: 'parameter'} | filter :q | filter :q0 | filter :q1" value="{{component.name}}">
            {{component.name}}
          </option>
        </select>
    </div>
    <div class="card-footer">
      <div class="table-responsive">
        <table class="table table-bordered">
          <tbody>
            <tr>
              <td class="font-weight-bold" ng-if="(definitions| filter : {specifications:c}).length>0">
                  Class bound
              </td>
              <td ng-repeat="definition in definitions  | filter : {specifications:c}">
                <a href="#/definition/{{definition._id}}" class="btn btn-outline-dark btn-sm mx-auto" target="_blank">
                  {{definition.name}}
                </a>
              </td>
            </tr>
            <tr>
              <td class="font-weight-bold" ng-if="(blocks| filter : {parameters:c}).length>0">
                  Custom
              </td>
              <td ng-repeat="block in blocks | filter : {parameters:c}">
                <a href="#/block/{{block._id}}" class="btn btn-outline-dark btn-sm mx-auto" target="_blank">
                  {{block.class}}|{{block.foundry}}
                </a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  </div>
  <br>
  <div class="collapse" id="collapseSpecs">
  <div class="card">
    <div class="card-header">
      Join comparaison
    </div>
    <div class="card-body p-0" >
      <ul class="list-group list-group-flush">
        <li class="list-group-item" style="background-color:#2E2E2E; min-width: 18rem;">
            <div class="row">
              <div class="col-md-12">
                <select class="custom-select custom-select-sm mb-2" ng-model="s">
                  <option value="" selected>
                    Select Function
                  </option>
                  <option value="{{component.name}}" ng-repeat="component in components | orderBy : 'name'| filter : {type: 'function'}">
                    {{component.name}}
                  </option>
                </select>
                <select class="custom-select custom-select-sm mb-2" ng-model="k">
                  <option value="" selected>
                    Select Class
                  </option>
                  <option value="{{definition.name}}" ng-repeat="definition in definitions | orderBy : 'name' | filter: {function:s}">
                    {{definition.name}}
                  </option>
                </select>
                <div class="btn-group d-flex justify-content-center" role="group" aria-label="view">
                  <button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#collapseScore" aria-expanded="true" aria-controls="collapseFunctions" style="background-color:#4B515D;">
                    Check
                  </button>
                  <button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#collapseRange" aria-expanded="false" aria-controls="collapseParameters" style="background-color:#4B515D;">
                    Compare
                  </button>
                </div>
              </div>
            </div>
        </li>
        <div class="collapse" id="collapseScore">
        <li class="list-group-item" style="min-width: 18rem;">
          <h2 class="d-flex justify-content-center">
            <button class="btn float-right mb-2 text-dark" data-clipboard-target="#ScoreCopy" style="background-color:#E4E4E4;" data-toggle="tooltip" data-placement="right" title="Copy the table below on the clipboard">
              <img data-feather="copy" alt="Copy to clipboard" class="text-dark" style="width: 15px; height: 15px;">
              Check
            </button>
          </h2>
          <div class="table-responsive" id="ScoreCopy">
            <table class="table table-bordered">
              <tbody>
                <tr ng-repeat="definition in definitions |filter:{function:s}|filter:{name:k}">
                  <td class="font-weight-bold">
                    {{definition.name}}
                    <hr>
                    <table>
                      <tr ng-repeat="specifications in definition.specifications" class="table-hover table-sm table-borderless">
                        <th scope="row">
                          ({{$index+1}})
                        </th>
                        <td>
                          {{definition.specifications[$index]}}
                        </td>
                      </tr>
                    </table>
                  </td>
                  <td ng-repeat="block in blocks | orderBy : 'foundry'" ng-if="definition.name==block.class&&block.valuec.length>0">
                    <a href="#/block/{{block._id}}" class="btn btn-outline-dark btn-sm mx-auto" target="_blank">
                      {{Bb=block.foundry}}|{{block.source}}
                    </a>
                    <hr>
                    <table class="table-hover table-sm table-borderless">
                      <tr ng-repeat="valuec in block.valuec track by $index">
                        <th scope="row">
                          ({{$index+1}})
                        </th>
                        <td>
                          {{block.valuec[$index]}}
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </li>
        </div>
        <div class="collapse" id="collapseRange">
        <li class="list-group-item" style="min-width: 18rem;">
          <h2 class="d-flex justify-content-center">
            <button class="btn float-right mb-2 text-dark" data-clipboard-target="#RangeCopy" style="background-color:#E4E4E4;">
              <img data-feather="copy" alt="Copy to clipboard" class="text-dark" style="width: 15px; height: 15px;" data-toggle="tooltip" data-placement="right" title="Copy the table below on the clipboard">
              Compare
            </button>
          </h2>
          <div class="table-responsive" id="RangeCopy">
            <table class="table table-bordered">
              <tbody>
                <tr ng-repeat="definition in definitions |filter:{function:s}|filter:{name:k}">
                  <td class="font-weight-bold">
                    {{definition.name}}
                    <hr>
                    <table class="table-hover table-sm table-borderless">
                      <p class="pl-4 ml-5">&nbsp;Min&nbsp;&nbsp;|&nbsp;Max</p>
                      <tr ng-repeat="specifications in definition.specifications">
                        <th scope="row">
                          ({{$index+1}})
                        </th>
                        <td ng-init="definition.min[$index]=0">
                          <input type="number" class="form-control form-control-sm" ng-model="definition.min[$index]" style="width:5rem;" placeholder="min">
                        </td>
                        <td ng-init="definition.max[$index]=0">
                          <input type="number" class="form-control form-control-sm" ng-model="definition.max[$index]" style="width:5rem;" placeholder="max">
                        </td>
                        <td>
                         {{definition.specifications[$index]}}
                        </td>
                      </tr>
                    </table>
                  </td>
                  <td ng-repeat="block in blocks | orderBy : 'foundry'" ng-if="definition.name==block.class&&block.valuec.length>0">
                    <a href="#/block/{{block._id}}" class="btn btn-outline-dark btn-sm mx-auto" target="_blank">
                      {{block.foundry}}
                    </a>
                    <hr>
                    <table class="table-hover table-sm table-borderless">
                      <tr ng-repeat="valuec in block.valuec track by $index">
                        <th scope="row">
                          ({{$index+1}})
                        </th>
                        <td>
                            {{block.valuec[$index]}}
                        </td>
                        <td>
                          <div ng-if="((block.valuec[$index]|number)>=definition.min[$index])&&((block.valuec[$index]|number)<=definition.max[$index])&&(definition.min[$index]<=definition.max[$index])">
                            <span data-feather="check" class="text-success" style="width: 15px; height: 15px;">
                          </div>
                          <div ng-if="((block.valuec[$index]|number)<definition.min[$index])||((block.valuec[$index]|number)>definition.max[$index])||(definition.min[$index]>definition.max[$index])">
                            <span data-feather="x" class="text-danger" style="width: 15px; height: 15px;">
                          </div>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </li>
        </div>
      </ul>
    </div>

    <div class="card-footer text-muted">
      <b>(Under development)</b>
    </div>
    </div>

    <!-- Icons -->
  <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
  <script>
    feather.replace()
  </script>
